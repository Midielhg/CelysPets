<!DOCTYPE html>
<html>
<head>
    <title>API Debug Test</title>
</head>
<body>
    <h1>API Debug Test</h1>
    <div id="results"></div>
    
    <script>
        async function testAPI() {
            try {
                console.log('Testing appointments API...');
                const appointmentsResponse = await fetch('https://celyspets.com/api/appointments');
                const appointments = await appointmentsResponse.json();
                console.log('Appointments:', appointments);
                document.getElementById('results').innerHTML += '<h2>Appointments loaded: ' + appointments.length + '</h2>';
                
                console.log('Testing clients API...');
                const clientsResponse = await fetch('https://celyspets.com/api/clients?page=1&limit=10');
                const clients = await clientsResponse.json();
                console.log('Clients:', clients);
                document.getElementById('results').innerHTML += '<h2>Clients response: ' + JSON.stringify(clients).substring(0, 100) + '...</h2>';
                
                // Test date parsing
                if (appointments.length > 0) {
                    const appointment = appointments[0];
                    console.log('Testing date parsing for:', appointment);
                    
                    const date = appointment.date;
                    const time = appointment.time;
                    console.log('Date:', date, 'Time:', time);
                    
                    // Try to parse like the frontend does
                    const normalizedDate = date ? date.split('T')[0] : '';
                    console.log('Normalized date:', normalizedDate);
                    
                    const [year, month, day] = normalizedDate.split('-').map(Number);
                    const appointmentDate = new Date(year, month - 1, day);
                    console.log('Parsed date:', appointmentDate);
                    
                    document.getElementById('results').innerHTML += '<h3>Date parsing test: ' + appointmentDate + '</h3>';
                }
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('results').innerHTML += '<h2 style="color: red;">Error: ' + error.message + '</h2>';
            }
        }
        
        testAPI();
    </script>
</body>
</html>
